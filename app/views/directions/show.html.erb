<head>
  <%= javascript_include_tag "https://maps.googleapis.com/maps/api/js?callback=genMap&key=#{ENV['google_maps_api_key']}" %>
</head>

Directions To <%= @restaurant.name %>

<div id="directions_map"></div>

<% provide :head_tags do %>
<script>
  var origin = new google.maps.LatLng(<%=@address.latitude%>, <%=@address.longitude%>);
  var destination = new google.maps.LatLng(<%=@restaurant.latitude%>, <%=@restaurant.longitude%>);

  function genMap () {
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var directionsService = new google.maps.DirectionsService();

    var mapOptions = {
      zoom: 12,
      center: origin
    };
    var directions_map = new google.maps.Map(document.getElementById('directions_map'), mapOptions);
    directionsDisplay.setMap(directions_map);
    calculateRoute(origin, destination, directionsDisplay, directionsService);
  }

  window.addEventListener("load", function(){
    genMap();
  });
</script>
<% end %>
